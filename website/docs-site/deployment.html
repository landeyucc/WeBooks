<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒ¨ç½²æŒ‡å— - Webooks æ–‡æ¡£</title>
    <meta name="description" content="å®Œæ•´çš„ Webooks éƒ¨ç½²æŒ‡å—ï¼ŒåŒ…å«æœ¬åœ°å¼€å‘ã€äº‘å¹³å°éƒ¨ç½²ã€Docker éƒ¨ç½²ç­‰å¤šç§æ–¹å¼ã€‚">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/docs-site.css">
</head>
<body>
    <header class="docs-header">
        <nav class="docs-nav">
            <div class="nav-brand">
                <h1><a href="../official-site/index.html">Webooks</a></h1>
                <span class="docs-badge">æ–‡æ¡£</span>
            </div>
            <ul class="docs-nav-menu">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="quick-start.html">å¿«é€Ÿå¼€å§‹</a></li>
                <li><a href="api.html">API æ–‡æ¡£</a></li>
                <li><a href="deployment.html" class="active">éƒ¨ç½²æŒ‡å—</a></li>
                <li><a href="faq.html">å¸¸è§é—®é¢˜</a></li>
            </ul>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <div class="docs-container">
        <aside class="docs-sidebar">
            <div class="sidebar-section">
                <h3>éƒ¨ç½²æ¦‚è§ˆ</h3>
                <ul>
                    <li><a href="#requirements">ç³»ç»Ÿè¦æ±‚</a></li>
                    <li><a href="#environment">ç¯å¢ƒå‡†å¤‡</a></li>
                    <li><a href="#database">æ•°æ®åº“è®¾ç½®</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>éƒ¨ç½²æ–¹å¼</h3>
                <ul>
                    <li><a href="#local">æœ¬åœ°å¼€å‘</a></li>
                    <li><a href="#docker">Docker éƒ¨ç½²</a></li>
                    <li><a href="#production">ç”Ÿäº§ç¯å¢ƒ</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>äº‘å¹³å°éƒ¨ç½²</h3>
                <ul>
                    <li><a href="#vercel">Vercel</a></li>
                    <li><a href="#netlify">Netlify</a></li>
                    <li><a href="#railway">Railway</a></li>
                    <li><a href="#digitalocean">DigitalOcean</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>é…ç½®ç®¡ç†</h3>
                <ul>
                    <li><a href="#environment-vars">ç¯å¢ƒå˜é‡</a></li>
                    <li><a href="#security">å®‰å…¨é…ç½®</a></li>
                    <li><a href="#monitoring">ç›‘æ§ä¸æ—¥å¿—</a></li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3>æ•…éšœæ’é™¤</h3>
                <ul>
                    <li><a href="#troubleshooting">å¸¸è§é—®é¢˜</a></li>
                    <li><a href="#performance">æ€§èƒ½ä¼˜åŒ–</a></li>
                    <li><a href="#backup">å¤‡ä»½ä¸æ¢å¤</a></li>
                </ul>
            </div>
        </aside>

        <main class="docs-main">
            <div class="docs-content">
                <h1>éƒ¨ç½²æŒ‡å—</h1>
                <p class="lead">å®Œæ•´çš„ Webooks éƒ¨ç½²æŒ‡å—ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼å’Œäº‘å¹³å°ã€‚</p>

                <section id="requirements" class="deployment-section">
                    <h2>ç³»ç»Ÿè¦æ±‚</h2>
                    <div class="requirements-grid">
                        <div class="req-item">
                            <h4>æœ€ä½è¦æ±‚</h4>
                            <ul>
                                <li>Node.js 18.x æˆ–æ›´é«˜ç‰ˆæœ¬</li>
                                <li>PostgreSQL 13+ æˆ– SQLite</li>
                                <li>1GB RAM</li>
                                <li>5GB ç£ç›˜ç©ºé—´</li>
                            </ul>
                        </div>
                        <div class="req-item">
                            <h4>æ¨èé…ç½®</h4>
                            <ul>
                                <li>Node.js 20.x LTS</li>
                                <li>PostgreSQL 15+</li>
                                <li>2GB+ RAM</li>
                                <li>20GB+ SSD å­˜å‚¨</li>
                            </ul>
                        </div>
                        <div class="req-item">
                            <h4>æ”¯æŒçš„æ“ä½œç³»ç»Ÿ</h4>
                            <ul>
                                <li>Ubuntu 20.04+</li>
                                <li>CentOS 7+</li>
                                <li>macOS 10.15+</li>
                                <li>Windows 10+</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="environment" class="deployment-section">
                    <h2>ç¯å¢ƒå‡†å¤‡</h2>
                    <div class="step-by-step">
                        <div class="step">
                            <h3>æ­¥éª¤ 1: å…‹éš†ä»£ç ä»“åº“</h3>
                            <pre><code class="language-bash">git clone https://github.com/yourusername/webooks.git
cd webooks</code></pre>
                        </div>

                        <div class="step">
                            <h3>æ­¥éª¤ 2: å®‰è£…ä¾èµ–</h3>
                            <pre><code class="language-bash"># ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install

# æˆ–ä½¿ç”¨ pnpm
pnpm install</code></pre>
                        </div>

                        <div class="step">
                            <h3>æ­¥éª¤ 3: é…ç½®ç¯å¢ƒå˜é‡</h3>
                            <p>å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶é…ç½®ï¼š</p>
                            <pre><code class="language-bash">cp .env.example .env</code></pre>
                            
                            <p>ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥å’Œå…¶ä»–å‚æ•°ï¼š</p>
                            <pre><code class="language-bash"># æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://username:password@localhost:5432/webooks"

# JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨å¼ºå¯†é’¥ï¼‰
JWT_SECRET="your-super-secret-jwt-key-here"

# åº”ç”¨é…ç½®
NODE_ENV=production
PORT=3000

# å¯é€‰ï¼šå¤–éƒ¨æœåŠ¡é…ç½®
OPENAI_API_KEY="your-openai-key"
SCRAPINGBee_API_KEY="your-scrapingbee-key"</code></pre>
                        </div>

                        <div class="step">
                            <h3>æ­¥éª¤ 4: æ•°æ®åº“è¿ç§»</h3>
                            <pre><code class="language-bash"># ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npx prisma generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma db push

# æˆ–æ‰§è¡Œå…·ä½“çš„è¿ç§»æ–‡ä»¶
npx prisma migrate deploy</code></pre>
                        </div>
                    </div>
                </section>

                <section id="database" class="deployment-section">
                    <h2>æ•°æ®åº“è®¾ç½®</h2>
                    
                    <div class="db-options">
                        <div class="db-option">
                            <h3>PostgreSQLï¼ˆæ¨èï¼‰</h3>
                            <div class="db-setup">
                                <h4>å®‰è£… PostgreSQL</h4>
                                <pre><code class="language-bash"># Ubuntu/Debian
sudo apt update
sudo apt install postgresql postgresql-contrib

# macOS (ä½¿ç”¨ Homebrew)
brew install postgresql

# å¯åŠ¨æœåŠ¡
sudo systemctl start postgresql
sudo systemctl enable postgresql</code></pre>

                                <h4>åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·</h4>
                                <pre><code class="language-sql">-- è¿æ¥åˆ° PostgreSQL
sudo -u postgres psql

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE webooks;

-- åˆ›å»ºç”¨æˆ·
CREATE USER webooks_user WITH ENCRYPTED PASSWORD 'your_password';

-- æˆæƒ
GRANT ALL PRIVILEGES ON DATABASE webooks TO webooks_user;

-- é€€å‡º
\q</code></pre>
                            </div>
                        </div>

                        <div class="db-option">
                            <h3>SQLiteï¼ˆå¼€å‘ç¯å¢ƒï¼‰</h3>
                            <div class="db-setup">
                                <p>SQLite é…ç½®æ›´ç®€å•ï¼Œé€‚åˆå¼€å‘å’Œæµ‹è¯•ï¼š</p>
                                <pre><code class="language-bash"># .env æ–‡ä»¶ä¸­é…ç½®
DATABASE_URL="file:./dev.db"</code></pre>
                                
                                <div class="warning">
                                    <strong>æ³¨æ„ï¼š</strong> SQLite ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒçš„é«˜å¹¶å‘åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ PostgreSQLã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="local" class="deployment-section">
                    <h2>æœ¬åœ°å¼€å‘éƒ¨ç½²</h2>
                    
                    <div class="development-setup">
                        <h3>å¼€å‘æ¨¡å¼</h3>
                        <p>å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š</p>
                        <pre><code class="language-bash"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–ä½¿ç”¨å…¶ä»–åŒ…ç®¡ç†å™¨
yarn dev
pnpm dev</code></pre>

                        <p>å¼€å‘æœåŠ¡å™¨å°†åœ¨ http://localhost:3000 å¯åŠ¨ã€‚</p>

                        <h3>æ„å»ºç”Ÿäº§ç‰ˆæœ¬</h3>
                        <pre><code class="language-bash"># æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run start</code></pre>

                        <h3>å¼€å‘å·¥å…·</h3>
                        <div class="dev-tools">
                            <ul>
                                <li><strong>çƒ­é‡è½½ï¼š</strong> ä»£ç ä¿®æ”¹åè‡ªåŠ¨åˆ·æ–°</li>
                                <li><strong>TypeScript æ£€æŸ¥ï¼š</strong> <code>npm run type-check</code></li>
                                <li><strong>ä»£ç æ ¼å¼åŒ–ï¼š</strong> <code>npm run lint</code></li>
                                <li><strong>æµ‹è¯•ï¼š</strong> <code>npm run test</code></li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="docker" class="deployment-section">
                    <h2>Docker éƒ¨ç½²</h2>
                    
                    <div class="docker-setup">
                        <h3>Dockerfile</h3>
                        <p>é¡¹ç›®æ ¹ç›®å½•å·²æœ‰ Dockerfileï¼š</p>
                        <pre><code class="language-dockerfile">FROM node:18-alpine AS base

# Install dependencies only when needed
FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /app

# Install dependencies based on the preferred package manager
COPY package.json yarn.lock* package-lock.json* pnpm-lock.yaml* ./
RUN \
  if [ -f yarn.lock ]; then yarn --frozen-lockfile; \
  elif [ -f package-lock.json ]; then npm ci; \
  elif [ -f pnpm-lock.yaml ]; then yarn global add pnpm && pnpm i --frozen-lockfile; \
  else echo "Lockfile not found." && exit 1; \
  fi

# Rebuild the source code only when needed
FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

# Generate Prisma Client
RUN npx prisma generate

# Build the application
ENV NEXT_TELEMETRY_DISABLED 1
RUN npm run build

# Production image
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production
ENV NEXT_TELEMETRY_DISABLED 1

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public

# Set the correct permission for prerender cache
RUN mkdir .next
RUN chown nextjs:nodejs .next

# Automatically leverage output traces to reduce image size
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs

EXPOSE 3000

ENV PORT 3000

CMD ["node", "server.js"]</code></pre>

                        <h3>Docker Compose</h3>
                        <p>ä½¿ç”¨ docker-compose.yml å¿«é€Ÿéƒ¨ç½²ï¼š</p>
                        <pre><code class="language-yaml">version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://webooks_user:password@db:5432/webooks
      - JWT_SECRET=your-jwt-secret-here
    depends_on:
      - db
    restart: unless-stopped

  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=webooks
      - POSTGRES_USER=webooks_user
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  postgres_data:</code></pre>

                        <h3>è¿è¡Œ Docker éƒ¨ç½²</h3>
                        <pre><code class="language-bash"># æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡æ–°æ„å»º
docker-compose up -d --build</code></pre>
                    </div>
                </section>

                <section id="vercel" class="deployment-section">
                    <h2>Vercel éƒ¨ç½²</h2>
                    
                    <div class="platform-deployment">
                        <h3>éƒ¨ç½²æ­¥éª¤</h3>
                        <div class="step">
                            <h4>1. å‡†å¤‡é¡¹ç›®</h4>
                            <p>ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•æœ‰ vercel.json é…ç½®æ–‡ä»¶ï¼š</p>
                            <pre><code class="language-json">{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "functions": {
    "app/api/**/*.ts": {
      "maxDuration": 30
    }
  },
  "env": {
    "DATABASE_URL": "@database-url",
    "JWT_SECRET": "@jwt-secret"
  },
  "build": {
    "env": {
      "DATABASE_URL": "@database-url"
    }
  }
}</code></pre>
                        </div>

                        <div class="step">
                            <h4>2. å®‰è£… Vercel CLI</h4>
                            <pre><code class="language-bash">npm i -g vercel</code></pre>
                        </div>

                        <div class="step">
                            <h4>3. éƒ¨ç½²</h4>
                            <pre><code class="language-bash">vercel --prod</code></pre>
                        </div>

                        <div class="step">
                            <h4>4. é…ç½®ç¯å¢ƒå˜é‡</h4>
                            <p>åœ¨ Vercel Dashboard ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p>
                            <ul>
                                <li><code>DATABASE_URL</code> - æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</li>
                                <li><code>JWT_SECRET</code> - JWT å¯†é’¥</li>
                                <li><code>NEXT_PUBLIC_APP_URL</code> - åº”ç”¨ URL</li>
                            </ul>
                        </div>
                    </div>

                    <div class="vercel-features">
                        <h3>Vercel åŠŸèƒ½</h3>
                        <ul>
                            <li><strong>è‡ªåŠ¨éƒ¨ç½²ï¼š</strong> Git æ¨é€åè‡ªåŠ¨éƒ¨ç½²</li>
                            <li><strong>é¢„è§ˆéƒ¨ç½²ï¼š</strong> Pull Request è‡ªåŠ¨åˆ›å»ºé¢„è§ˆ</li>
                            <li><strong>CDNï¼š</strong> å…¨çƒå†…å®¹åˆ†å‘ç½‘ç»œ</li>
                            <li><strong>æ•°æ®åº“ï¼š</strong> æ”¯æŒ Vercel PostgreSQL</li>
                        </ul>
                    </div>
                </section>

                <section id="netlify" class="deployment-section">
                    <h2>Netlify éƒ¨ç½²</h2>
                    
                    <div class="platform-deployment">
                        <h3>é…ç½®</h3>
                        <p>netlify.toml é…ç½®æ–‡ä»¶ï¼š</p>
                        <pre><code class="language-toml">[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "18"

[[redirects]]
  from = "/api/*"
  to = "/api/:splat"
  status = 200

[functions]
  directory = "api"
  external_node_modules = ["prisma", "@prisma/client"]</code></pre>

                        <h3>éƒ¨ç½²æµç¨‹</h3>
                        <ol>
                            <li>å°†é¡¹ç›®æ¨é€åˆ° GitHub/GitLab</li>
                            <li>åœ¨ Netlify ä¸­è¿æ¥ä»£ç ä»“åº“</li>
                            <li>è®¾ç½®æ„å»ºè®¾ç½®å’Œéƒ¨ç½²å‘½ä»¤</li>
                            <li>é…ç½®ç¯å¢ƒå˜é‡</li>
                            <li>éƒ¨ç½²</li>
                        </ol>
                    </div>
                </section>

                <section id="railway" class="deployment-section">
                    <h2>Railway éƒ¨ç½²</h2>
                    
                    <div class="platform-deployment">
                        <h3>Railway ç‰¹ç‚¹</h3>
                        <ul>
                            <li>è‡ªåŠ¨æ•°æ®åº“æ‰˜ç®¡</li>
                            <li>GitHub é›†æˆ</li>
                            <li>ä¸€é”®éƒ¨ç½²</li>
                            <li>å†…ç½®ç›‘æ§</li>
                        </ul>

                        <h3>éƒ¨ç½²æ­¥éª¤</h3>
                        <ol>
                            <li>è®¿é—® <a href="https://railway.app" target="_blank">railway.app</a></li>
                            <li>ä½¿ç”¨ GitHub ç™»å½•</li>
                            <li>åˆ›å»ºæ–°é¡¹ç›®ï¼Œé€‰æ‹© "Deploy from GitHub repo"</li>
                            <li>é€‰æ‹© Webooks ä»“åº“</li>
                            <li>Railway ä¼šè‡ªåŠ¨æ£€æµ‹ Next.js é¡¹ç›®</li>
                            <li>åœ¨ Variables æ ‡ç­¾ä¸­æ·»åŠ ç¯å¢ƒå˜é‡</li>
                            <li>éƒ¨ç½²ä¼šè‡ªåŠ¨å¼€å§‹</li>
                        </ol>

                        <div class="railway-config">
                            <h4>æ¨èçš„ç¯å¢ƒå˜é‡é…ç½®</h4>
                            <pre><code class="language-bash">DATABASE_URL=${{Postgres.DATABASE_URL}}
JWT_SECRET=your-random-jwt-secret
NODE_ENV=production
NEXT_PUBLIC_APP_URL=${{RAILWAY_PUBLIC_DOMAIN}}</code></pre>
                        </div>
                    </div>
                </section>

                <section id="digitalocean" class="deployment-section">
                    <h2>DigitalOcean éƒ¨ç½²</h2>
                    
                    <div class="platform-deployment">
                        <h3>Droplet éƒ¨ç½²</h3>
                        
                        <div class="droplet-steps">
                            <div class="step">
                                <h4>1. åˆ›å»º Droplet</h4>
                                <ul>
                                    <li>é€‰æ‹© Ubuntu 20.04+</li>
                                    <li>æ¨èé…ç½®ï¼š2GB RAM, 1 vCPU</li>
                                    <li>æ·»åŠ  SSH å¯†é’¥</li>
                                </ul>
                            </div>

                            <div class="step">
                                <h4>2. å®‰è£…ä¾èµ–</h4>
                                <pre><code class="language-bash"># æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£… PostgreSQL
sudo apt install postgresql postgresql-contrib

# å®‰è£… Nginx
sudo apt install nginx</code></pre>
                            </div>

                            <div class="step">
                                <h4>3. éƒ¨ç½²åº”ç”¨</h4>
                                <pre><code class="language-bash"># å…‹éš†ä»£ç 
git clone https://github.com/yourusername/webooks.git
cd webooks

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºåº”ç”¨
npm run build

# ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹
npm install -g pm2
pm2 start npm --name "webooks" -- start
pm2 startup
pm2 save</code></pre>
                            </div>

                            <div class="step">
                                <h4>4. é…ç½® Nginx</h4>
                                <pre><code class="language-bash"># /etc/nginx/sites-available/webooks
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}</code></pre>

                                <pre><code class="language-bash"># å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/webooks /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="environment-vars" class="deployment-section">
                    <h2>ç¯å¢ƒå˜é‡é…ç½®</h2>
                    
                    <div class="env-config">
                        <h3>å¿…éœ€å˜é‡</h3>
                        <table class="env-table">
                            <thead>
                                <tr>
                                    <th>å˜é‡å</th>
                                    <th>æè¿°</th>
                                    <th>ç¤ºä¾‹å€¼</th>
                                    <th>å¿…å¡«</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>DATABASE_URL</code></td>
                                    <td>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</td>
                                    <td>postgresql://user:pass@localhost:5432/webooks</td>
                                    <td>æ˜¯</td>
                                </tr>
                                <tr>
                                    <td><code>JWT_SECRET</code></td>
                                    <td>JWT ç­¾åå¯†é’¥</td>
                                    <td>your-super-secret-key-here</td>
                                    <td>æ˜¯</td>
                                </tr>
                                <tr>
                                    <td><code>NODE_ENV</code></td>
                                    <td>è¿è¡Œç¯å¢ƒ</td>
                                    <td>production</td>
                                    <td>æ˜¯</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>å¯é€‰å˜é‡</h3>
                        <table class="env-table">
                            <thead>
                                <tr>
                                    <th>å˜é‡å</th>
                                    <th>æè¿°</th>
                                    <th>ç¤ºä¾‹å€¼</th>
                                    <th>é»˜è®¤å€¼</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>NEXT_PUBLIC_APP_URL</code></td>
                                    <td>åº”ç”¨å…¬å¼€ URL</td>
                                    <td>https://webooks.example.com</td>
                                    <td>è‡ªåŠ¨æ£€æµ‹</td>
                                </tr>
                                <tr>
                                    <td><code>OPENAI_API_KEY</code></td>
                                    <td>OpenAI API å¯†é’¥</td>
                                    <td>sk-...</td>
                                    <td>-</td>
                                </tr>
                                <tr>
                                    <td><code>SCRAPINGBee_API_KEY</code></td>
                                    <td>ç½‘é¡µæŠ“å–æœåŠ¡å¯†é’¥</td>
                                    <td>your-api-key</td>
                                    <td>-</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="env-security">
                            <h3>å®‰å…¨å»ºè®®</h3>
                            <ul>
                                <li><strong>å¼ºå¯†é’¥ï¼š</strong> JWT_SECRET ä½¿ç”¨éšæœºç”Ÿæˆçš„å¼ºå¯†é’¥</li>
                                <li><strong>æ•°æ®åº“å®‰å…¨ï¼š</strong> ä½¿ç”¨ç‹¬ç«‹æ•°æ®åº“ç”¨æˆ·ï¼Œé™åˆ¶æƒé™</li>
                                <li><strong>ç¯å¢ƒéš”ç¦»ï¼š</strong> ç”Ÿäº§ã€å¼€å‘ã€æµ‹è¯•ç¯å¢ƒåˆ†åˆ«é…ç½®</li>
                                <li><strong>å¯†é’¥ç®¡ç†ï¼š</strong> ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡ï¼ˆå¦‚ AWS Secrets Managerï¼‰</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="security" class="deployment-section">
                    <h2>å®‰å…¨é…ç½®</h2>
                    
                    <div class="security-config">
                        <div class="security-item">
                            <h3>HTTPS é…ç½®</h3>
                            <p>ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPSï¼š</p>
                            <pre><code class="language-bash"># ä½¿ç”¨ Let's Encrypt
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com</code></pre>
                        </div>

                        <div class="security-item">
                            <h3>é˜²ç«å¢™é…ç½®</h3>
                            <pre><code class="language-bash"># Ubuntu/Debian UFW
sudo ufw allow ssh
sudo ufw allow 'Nginx Full'
sudo ufw enable

# æ£€æŸ¥çŠ¶æ€
sudo ufw status</code></pre>
                        </div>

                        <div class="security-item">
                            <h3>æ•°æ®åº“å®‰å…¨</h3>
                            <ul>
                                <li>é™åˆ¶æ•°æ®åº“ç½‘ç»œè®¿é—®</li>
                                <li>ä½¿ç”¨å¼ºå¯†ç </li>
                                <li>å®šæœŸæ›´æ–°è½¯ä»¶åŒ…</li>
                                <li>å¯ç”¨ PostgreSQL SSL</li>
                            </ul>
                        </div>

                        <div class="security-item">
                            <h3>åº”ç”¨å®‰å…¨</h3>
                            <ul>
                                <li><strong>CORS é…ç½®ï¼š</strong> é™åˆ¶å…è®¸çš„æº</li>
                                <li><strong>é€Ÿç‡é™åˆ¶ï¼š</strong> é˜²æ­¢ API æ»¥ç”¨</li>
                                <li><strong>è¾“å…¥éªŒè¯ï¼š</strong> éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥</li>
                                <li><strong>é”™è¯¯å¤„ç†ï¼š</strong> ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="troubleshooting" class="deployment-section">
                    <h2>æ•…éšœæ’é™¤</h2>
                    
                    <div class="troubleshooting">
                        <div class="issue">
                            <h3>æ•°æ®åº“è¿æ¥å¤±è´¥</h3>
                            <div class="solution">
                                <p><strong>æ£€æŸ¥é¡¹ï¼š</strong></p>
                                <ul>
                                    <li>æ•°æ®åº“æœåŠ¡æ˜¯å¦è¿è¡Œ</li>
                                    <li>è¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®</li>
                                    <li>é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥</li>
                                    <li>æ•°æ®åº“ç”¨æˆ·æƒé™</li>
                                </ul>
                                <p><strong>è°ƒè¯•å‘½ä»¤ï¼š</strong></p>
                                <pre><code class="language-bash"># æµ‹è¯•æ•°æ®åº“è¿æ¥
psql "postgresql://user:pass@host:port/db" -c "SELECT 1;"

# æ£€æŸ¥ PostgreSQL æ—¥å¿—
sudo tail -f /var/log/postgresql/postgresql-*.log</code></pre>
                            </div>
                        </div>

                        <div class="issue">
                            <h3>æ„å»ºå¤±è´¥</h3>
                            <div class="solution">
                                <p><strong>å¸¸è§åŸå› ï¼š</strong></p>
                                <ul>
                                    <li>ä¾èµ–ç‰ˆæœ¬å†²çª</li>
                                    <li>TypeScript ç¼–è¯‘é”™è¯¯</li>
                                    <li>ç¯å¢ƒå˜é‡ç¼ºå¤±</li>
                                    <li>ç£ç›˜ç©ºé—´ä¸è¶³</li>
                                </ul>
                                <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                                <pre><code class="language-bash"># æ¸…ç†ç¼“å­˜
rm -rf node_modules package-lock.json
npm install

# æ£€æŸ¥æ„å»ºæ—¥å¿—
npm run build 2>&1 | tee build.log</code></pre>
                            </div>
                        </div>

                        <div class="issue">
                            <h3>JWT è®¤è¯é—®é¢˜</h3>
                            <div class="solution">
                                <p><strong>æ£€æŸ¥é¡¹ï¼š</strong></p>
                                <ul>
                                    <li>JWT_SECRET æ˜¯å¦è®¾ç½®</li>
                                    <li>ä»¤ç‰Œæ˜¯å¦è¿‡æœŸ</li>
                                    <li>å®¢æˆ·ç«¯æ—¶åŒºè®¾ç½®</li>
                                </ul>
                                <p><strong>è°ƒè¯•ï¼š</strong></p>
                                <pre><code class="language-bash"># æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $JWT_SECRET

# æµ‹è¯•ä»¤ç‰Œç”Ÿæˆ
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"</code></pre>
                            </div>
                        </div>

                        <div class="issue">
                            <h3>å†…å­˜ä¸è¶³</h3>
                            <div class="solution">
                                <p><strong>ç›‘æ§å†…å­˜ä½¿ç”¨ï¼š</strong></p>
                                <pre><code class="language-bash"># æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
htop

# æŸ¥çœ‹ Next.js å†…å­˜
pm2 monit

# ä¼˜åŒ–å»ºè®®ï¼š
# 1. å¢åŠ æœåŠ¡å™¨å†…å­˜
# 2. å¯ç”¨ SWAP
# 3. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
# 4. ä½¿ç”¨ CDN</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="performance" class="deployment-section">
                    <h2>æ€§èƒ½ä¼˜åŒ–</h2>
                    
                    <div class="performance-tips">
                        <div class="tip-category">
                            <h3>åº”ç”¨ä¼˜åŒ–</h3>
                            <ul>
                                <li><strong>å¯ç”¨ gzip å‹ç¼©</strong></li>
                                <li><strong>ä½¿ç”¨ CDN</strong> é™æ€èµ„æº</li>
                                <li><strong>æ•°æ®åº“è¿æ¥æ± </strong></li>
                                <li><strong>API å“åº”ç¼“å­˜</strong></li>
                                <li><strong>å›¾ç‰‡ä¼˜åŒ–</strong> å’Œæ‡’åŠ è½½</li>
                            </ul>
                        </div>

                        <div class="tip-category">
                            <h3>æœåŠ¡å™¨ä¼˜åŒ–</h3>
                            <ul>
                                <li><strong>åå‘ä»£ç†</strong> é…ç½®ç¼“å­˜</li>
                                <li><strong>HTTP/2</strong> æ”¯æŒ</li>
                                <li><strong>æµè§ˆå™¨ç¼“å­˜</strong> ç­–ç•¥</li>
                                <li><strong>è´Ÿè½½å‡è¡¡</strong> é…ç½®</li>
                            </ul>
                        </div>

                        <div class="tip-category">
                            <h3>æ•°æ®åº“ä¼˜åŒ–</h3>
                            <ul>
                                <li><strong>ç´¢å¼•ä¼˜åŒ–</strong></li>
                                <li><strong>æŸ¥è¯¢ä¼˜åŒ–</strong></li>
                                <li><strong>è¿æ¥æ± é…ç½®</strong></li>
                                <li><strong>å®šæœŸç»´æŠ¤</strong></li>
                            </ul>
                        </div>
                    </div>

                    <div class="monitoring-setup">
                        <h3>ç›‘æ§è®¾ç½®</h3>
                        <p>æ¨èä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œç›‘æ§ï¼š</p>
                        <ul>
                            <li><strong>åº”ç”¨ç›‘æ§ï¼š</strong> Sentryã€New Relic</li>
                            <li><strong>æœåŠ¡å™¨ç›‘æ§ï¼š</strong> Prometheus + Grafana</li>
                            <li><strong>æ—¥å¿—èšåˆï¼š</strong> ELK Stackã€Papertrail</li>
                            <li><strong>Uptime ç›‘æ§ï¼š</strong> Pingdomã€UptimeRobot</li>
                        </ul>
                    </div>
                </section>

                <section id="backup" class="deployment-section">
                    <h2>å¤‡ä»½ä¸æ¢å¤</h2>
                    
                    <div class="backup-strategy">
                        <div class="backup-item">
                            <h3>æ•°æ®åº“å¤‡ä»½</h3>
                            <pre><code class="language-bash"># PostgreSQL å¤‡ä»½
pg_dump webooks > backup_$(date +%Y%m%d_%H%M%S).sql

# è‡ªåŠ¨å¤‡ä»½è„šæœ¬
#!/bin/bash
BACKUP_DIR="/backups"
DATE=$(date +%Y%m%d_%H%M%S)
pg_dump "postgresql://user:pass@localhost:5432/webooks" > "$BACKUP_DIR/webooks_$DATE.sql"
find "$BACKUP_DIR" -name "webooks_*.sql" -mtime +7 -delete</code></pre>
                        </div>

                        <div class="backup-item">
                            <h3>æ–‡ä»¶å¤‡ä»½</h3>
                            <pre><code class="language-bash"># å¤‡ä»½ä¸Šä¼ æ–‡ä»¶å’Œé…ç½®
tar -czf webooks_files_$(date +%Y%m%d).tar.gz /path/to/uploads /path/to/.env

# ä½¿ç”¨ rsync åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨
rsync -avz /path/to/webooks/ user@backup-server:/backups/webooks/</code></pre>
                        </div>

                        <div class="backup-item">
                            <h3>æ¢å¤æµç¨‹</h3>
                            <pre><code class="language-bash"># 1. åœæ­¢åº”ç”¨
pm2 stop webooks

# 2. æ¢å¤æ•°æ®åº“
psql webooks < backup_20241201_120000.sql

# 3. æ¢å¤æ–‡ä»¶
tar -xzf webooks_files_20241201.tar.gz -C /

# 4. é‡å¯åº”ç”¨
pm2 restart webooks</code></pre>
                        </div>
                    </div>

                    <div class="backup-best-practices">
                        <h3>å¤‡ä»½æœ€ä½³å®è·µ</h3>
                        <ul>
                            <li><strong>å®šæœŸå¤‡ä»½ï¼š</strong> æ¯å¤©è‡ªåŠ¨å¤‡ä»½</li>
                            <li><strong>å¼‚åœ°å¤‡ä»½ï¼š</strong> å¤‡ä»½åˆ°ä¸åŒä½ç½®</li>
                            <li><strong>æµ‹è¯•æ¢å¤ï¼š</strong> å®šæœŸæµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹</li>
                            <li><strong>ç‰ˆæœ¬ä¿ç•™ï¼š</strong> ä¿ç•™å¤šä¸ªå¤‡ä»½ç‰ˆæœ¬</li>
                        </ul>
                    </div>
                </section>

                <section class="next-steps">
                    <h2>ä¸‹ä¸€æ­¥</h2>
                    <div class="next-steps-grid">
                        <a href="faq.html" class="next-step">
                            <div class="step-icon">â“</div>
                            <h3>å¸¸è§é—®é¢˜</h3>
                            <p>æŸ¥çœ‹å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</p>
                        </a>
                        <a href="api.html" class="next-step">
                            <div class="step-icon">ğŸ”Œ</div>
                            <h3>API æ–‡æ¡£</h3>
                            <p>äº†è§£å®Œæ•´çš„ API å‚è€ƒ</p>
                        </a>
                        <a href="../official-site/index.html" class="next-step">
                            <div class="step-icon">ğŸ </div>
                            <h3>è¿”å›å®˜ç½‘</h3>
                            <p>æŸ¥çœ‹äº§å“ä»‹ç»å’ŒåŠŸèƒ½ç‰¹æ€§</p>
                        </a>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <footer class="docs-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>æ–‡æ¡£</h4>
                    <ul>
                        <li><a href="quick-start.html">å¿«é€Ÿå¼€å§‹</a></li>
                        <li><a href="api.html">API æ–‡æ¡£</a></li>
                        <li><a href="deployment.html">éƒ¨ç½²æŒ‡å—</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>èµ„æº</h4>
                    <ul>
                        <li><a href="../official-site/index.html">å®˜æ–¹ç½‘ç«™</a></li>
                        <li><a href="faq.html">å¸¸è§é—®é¢˜</a></li>
                        <li><a href="https://github.com/yourusername/webooks">GitHub</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Webooks æ–‡æ¡£. å¼€æºé¡¹ç›®ï¼Œéµå¾ª MIT è®¸å¯è¯ã€‚</p>
            </div>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
</body>
</html>